<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - PizarraCollab</title>
    <link rel='stylesheet' href='css/style.css' />
    <link rel='stylesheet' href='css/profile.css' />
    <link rel='stylesheet' href='css/gallery.css' />
</head>
<body>
    <div class="profile-container">
        <div class="profile-header">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">?</div>
                <div class="user-details">
                    <h1 id="username">Cargando...</h1>
                    <p id="userStats">Miembro desde <span id="memberSince">...</span></p>
                </div>
            </div>
            <div class="header-actions">
                <a href="index.html" class="btn btn-primary">üé® Ir a Dibujar</a>
                <a href="gallery.html" target="_blank" class="btn btn-secondary">üñºÔ∏è Galer√≠a Global</a>
                <button class="btn btn-danger" onclick="logout()">Cerrar Sesi√≥n</button>
            </div>
        </div>

        <div class="gallery-section">
            <div class="gallery-header">
                <h2>Mis Dibujos (<span id="imageCount">0</span>)</h2>
            </div>
            <div id="galleryContent" class="loading">
                Cargando galer√≠a...
            </div>
        </div>
    </div>

    <!-- Modal para ver imagen completa con todos los datos -->
    <div id="imageModal" class="modal">
        <div class="modal-content-large">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <div class="modal-layout">
                <div class="modal-image-container">
                    <img id="modalImage" class="modal-image" src="" alt="Imagen">
                    
                    <!-- Selector de capas -->
                    <div id="layersSelector" class="layers-selector" style="display: none;">
                        <h4>üé® Ver por capas:</h4>
                        <div id="layerButtons" class="layer-buttons"></div>
                        <button id="downloadLayersBtn" class="btn btn-primary btn-small" onclick="downloadLayers()" style="margin-top: 10px; width: 100%;">
                            üì¶ Descargar capas (ZIP)
                        </button>
                    </div>
                </div>
                <div class="modal-sidebar">
                    <div class="modal-header">
                        <h3 id="modalTitle">T√≠tulo</h3>
                        <p id="modalDescription" class="modal-description"></p>
                    </div>
                    
                    <div class="modal-meta">
                        <p id="modalAuthor" class="author-info">üë§ Por: <strong>Usuario</strong></p>
                        <p id="modalSavedBy" class="saved-by-info">üíæ Guardado por: <strong>Usuario</strong></p>
                        <p id="modalDate" class="date-info">üìÖ Fecha</p>
                        <p id="modalSession" class="session-info">üé® Sesi√≥n: <strong>0</strong></p>
                    </div>

                    <div id="collaboratorsSection" class="collaborators-section">
                        <h4>üë• Colaboradores</h4>
                        <div id="modalCollaborators"></div>
                    </div>

                    <div class="like-section">
                        <button id="likeBtn" class="like-btn" onclick="toggleLike()">
                            <svg id="likeIcon" viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor" d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"/>
                            </svg>
                            <span id="likeText">Me gusta</span>
                        </button>
                        <p id="likesCount" class="likes-count">0 likes</p>
                    </div>

                    <div class="comments-section">
                        <h4>üí¨ Comentarios (<span id="commentsCount">0</span>)</h4>
                        
                        <div id="commentForm" class="comment-form">
                            <textarea id="commentInput" placeholder="Escribe un comentario..." rows="3" maxlength="500"></textarea>
                            <button onclick="submitComment()" class="btn btn-primary btn-small">Comentar</button>
                        </div>

                        <div id="commentsList" class="comments-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/toast.js"></script>
    <script src="js/profile.js"></script>
</body>
</html>
